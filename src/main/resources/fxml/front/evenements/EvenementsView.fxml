<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<ScrollPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.front.evenements.EvenementsController"
            fitToWidth="true"
            hbarPolicy="NEVER"
            vbarPolicy="AS_NEEDED"
            stylesheets="@/styles/evenements/evenements-view.css"
            styleClass="evScroll">

    <content>
        <VBox spacing="16" styleClass="evRoot">
            <padding>
                <Insets top="14" right="14" bottom="18" left="14"/>
            </padding>

            <!-- â•â•â•â•â•â•â• HERO HEADER â•â•â•â•â•â•â• -->
            <HBox spacing="14" alignment="CENTER_LEFT" styleClass="evHero">
                <VBox spacing="4">
                    <Label text="ðŸŽ‰ Ã‰vÃ©nements" styleClass="evTitle"/>
                    <Label text="DÃ©couvrez et rejoignez les Ã©vÃ©nements prÃ¨s de chez vous"
                           styleClass="evSubtitle"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="evSearchBox">
                    <Label text="ðŸ”Ž" styleClass="evSearchIcon"/>
                    <TextField fx:id="searchField"
                               promptText="Ex: concert, marathon, expositionâ€¦"
                               styleClass="evSearchField"/>
                    <Button text="RÃ©initialiser" onAction="#resetFilters" styleClass="evGhostBtn"/>
                </HBox>
            </HBox>

            <!-- â•â•â•â•â•â•â• STATS BAR â•â•â•â•â•â•â• -->
            <HBox spacing="12" alignment="CENTER_LEFT" styleClass="evStatsBar">
                <Label fx:id="countLabel" text="0 Ã©vÃ©nement(s)" styleClass="evCountBadge"/>
                <Label fx:id="inscritLabel" text="â€”" styleClass="evInscritBadge"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="âœ“ Mes inscriptions" onAction="#showMesInscriptions" styleClass="evGhostBtn"/>
                <Button text="Tous" onAction="#showAll" styleClass="evGhostBtnActive"/>
            </HBox>

            <!-- â•â•â•â•â•â•â• FILTRE TYPE (PRIVE/PUBLIC) â•â•â•â•â•â•â• -->
            <VBox spacing="8" styleClass="evSection">
                <HBox alignment="CENTER_LEFT">
                    <Label text="Type" styleClass="evSectionTitle"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Tous" onAction="#selectAllTypes" styleClass="evChip evChipMuted"/>
                </HBox>
                <!-- Les boutons sont construits dynamiquement dans buildTypeChips() -->
                <HBox fx:id="typesChips" spacing="10" styleClass="evChipsRow"/>
            </VBox>

            <!-- â•â•â•â•â•â•â• FILTRE STATUT â•â•â•â•â•â•â• -->
            <VBox spacing="8" styleClass="evSection">
                <HBox alignment="CENTER_LEFT">
                    <Label text="Statut" styleClass="evSectionTitle"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Tous" onAction="#selectAllStatuts" styleClass="evChip evChipMuted"/>
                </HBox>
                <!-- Les boutons sont construits dynamiquement dans buildStatutChips() -->
                <HBox fx:id="statutsChips" spacing="10" styleClass="evChipsRow"/>
            </VBox>

            <!-- â•â•â•â•â•â•â• RÃ‰SULTATS â•â•â•â•â•â•â• -->
            <VBox spacing="10" styleClass="evSection">
                <HBox alignment="CENTER_LEFT">
                    <Label text="RÃ©sultats" styleClass="evSectionTitle"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="stateLabel" text="" visible="false" managed="false"
                           styleClass="evStateLabel"/>
                </HBox>

                <FlowPane fx:id="cardsPane"
                          hgap="14" vgap="14"
                          prefWrapLength="1100"
                          styleClass="evCardsPane"/>
            </VBox>

        </VBox>
    </content>
</ScrollPane>
